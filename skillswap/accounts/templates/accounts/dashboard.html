{% extends "base.html" %}
{% block content %}

<div class="max-w-5xl mx-auto">

    <!-- Title -->
    <h1 class="text-3xl font-bold text-cyan-400 mb-6">Your Enrolled Courses</h1>

    {% if enrollments %}
        <div class="space-y-4">
            {% for item in enrollments %}
            <div class="bg-gray-800 p-5 rounded-lg border border-gray-700 flex justify-between items-center">
                <div>
                    <h2 class="text-xl font-semibold text-white">{{ item.course.title }}</h2>
                    <p class="text-sm text-gray-400">Instructor: {{ item.course.instructor.username }}</p>
                </div>

                <a href="{% url 'unenroll' item.course.id %}"
                   onclick="return confirm('Are you sure you want to unenroll?');"
                   class="bg-red-500 px-4 py-2 rounded text-white hover:bg-red-600">
                    Unenroll
                </a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-300">You haven't enrolled in any courses yet.</p>
    {% endif %}

    <!-- Divider -->
    <hr class="my-10 border-gray-700">

    <!-- Credits Section -->
    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">

        <h2 class="text-2xl font-bold text-cyan-400 mb-2">
            Hello, {{ request.user.username }} ðŸ‘‹
        </h2>
        <p class="text-gray-300 mb-4">Your Credits: 
            <span class="text-cyan-300 font-semibold">
                {{ request.user.userprofile.credits }}
            </span>
        </p>

        <div class="flex flex-wrap gap-4">

            <form action="{% url 'earn_credits' %}" method="POST">
                {% csrf_token %}
                <button class="bg-green-500 px-4 py-2 rounded font-semibold hover:bg-green-600 text-white">
                    Teach Student (+5 Credits)
                </button>
            </form>

            <form action="{% url 'spend_credits' %}" method="POST">
                {% csrf_token %}
                <button class="bg-blue-500 px-4 py-2 rounded font-semibold hover:bg-blue-600 text-white">
                    Enroll in Course (-3 Credits)
                </button>
            </form>

        </div>

        {% if message %}
        <p class="mt-3 text-cyan-300 font-medium">{{ message }}</p>
        {% endif %}

    </div>
    <form action="{% url 'earn_credits' %}" method="post">
    <form action="{% url 'spend_credits' %}" method="post">

</div>

{% endblock %}
